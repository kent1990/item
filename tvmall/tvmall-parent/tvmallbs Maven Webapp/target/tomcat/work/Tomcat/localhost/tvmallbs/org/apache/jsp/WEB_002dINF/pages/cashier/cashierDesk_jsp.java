/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/7.0.47
 * Generated at: 2020-01-15 08:45:13 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp.WEB_002dINF.pages.cashier;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;
import java.util.*;

public final class cashierDesk_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  private javax.el.ExpressionFactory _el_expressionfactory;
  private org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public void _jspInit() {
    _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
    _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
        throws java.io.IOException, javax.servlet.ServletException {

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html;charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\r\n");
      out.write("\r\n");

String path = request.getContextPath();
String basePath = request.getScheme()+"://"+request.getServerName()+":"+request.getServerPort()+path+"/";

      out.write("\r\n");
      out.write("\r\n");
      out.write("<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\">\r\n");
      out.write("<html>\r\n");
      out.write("<head>\r\n");
      out.write("  <base href=\"");
      out.print(basePath);
      out.write("\">\r\n");
      out.write(" <meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no\">\r\n");
      out.write(" <meta name=\"format-detection\" content=\"telephone=no\">\r\n");
      out.write(" <meta charset=\"UTF-8\">\r\n");
      out.write(" <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\r\n");
      out.write(" <meta name=\"renderer\" content=\"webkit\">\r\n");
      out.write(" <title>收银台 </title>\r\n");
      out.write("\r\n");
      out.write("   <link rel=\"stylesheet\" href=\"css/business/midian.css\" type=\"text/css\"/>\r\n");
      out.write("\t<link rel=\"stylesheet\" href=\"css/business/mricode.pagination.css\" type=\"text/css\"/>\r\n");
      out.write("\t<link href=\"js/common/ztree/zTreeStyle/zTreeStyle.css\" rel=\"stylesheet\"  type=\"text/css\"/>\r\n");
      out.write("\t<script type=\"text/javascript\" src=\"js/common/jquery-1.8.2.min.js\"></script>\r\n");
      out.write("\t<script type=\"text/javascript\" src=\"js/common/mricode.pagination.js\"></script>\r\n");
      out.write("\t<script type=\"text/javascript\" src=\"js/common/jquery.json-2.2.js\"></script>\r\n");
      out.write("\t<script type=\"text/javascript\" src=\"js/common/Validform_v5.3.2_min.js\"></script>\r\n");
      out.write("\t<script type=\"text/javascript\" src=\"js/My97DatePicker/WdatePicker.js\"></script>\r\n");
      out.write("\t<script type=\"text/javascript\" src=\"js/treeCombox/treeCombox.js\"></script>\r\n");
      out.write("\t<script type=\"text/javascript\" src=\"js/common/jquery.validate.min.js\"></script>\r\n");
      out.write("\t<script src=\"js/common/ztree/jquery.ztree.all.min.js\" type=\"text/javascript\"></script>\r\n");
      out.write("\t<script type=\"text/javascript\" src=\"js/common/midian.js\"></script>\r\n");
      out.write("</head>\r\n");
      out.write("  \r\n");
      out.write("  <body style=\"zoom: 1;\">\r\n");
      out.write("\r\n");
      out.write("\t <div class=\"x12\" id=\"div_id\" style=\"display: none;\">\r\n");
      out.write("        <div class=\"x12 bgf5f5f5\">\r\n");
      out.write("            <div class=\"x1\"></div>\r\n");
      out.write("            <div class=\"x10 text-white\">\r\n");
      out.write("                <div class=\"x12  text-gray\">\r\n");
      out.write("                    <div class=\"x5 bheight padding-right border-right border-big  bg-white\">\r\n");
      out.write("                        <div class=\"x12 padding-big\">\r\n");
      out.write("                           \r\n");
      out.write("                            <div class=\"x12\" id=\"huiyuancenter\">\r\n");
      out.write("                                <div class=\"x12 padding-top padding-bottom\">\r\n");
      out.write("                                    <ul class=\"buy-car line over-auto border\" style=\"height: 400px;\"></ul>\r\n");
      out.write("                                </div>\r\n");
      out.write("                                <div class=\"x12  height padding-bottom padding-top\">\r\n");
      out.write("                                        <div class=\"x12 text-gray text-big\">\r\n");
      out.write("                                            <div class=\"x6\">件数：<span class=\"text-red\">0</span></div>\r\n");
      out.write("                                            <div class=\"x6\">合计：<span class=\"text-red\">￥0.00</span></div>\r\n");
      out.write("                                        </div>\r\n");
      out.write("\r\n");
      out.write("                                </div>\r\n");
      out.write("                            </div>\r\n");
      out.write("                        </div>\r\n");
      out.write("                    </div>\r\n");
      out.write("                    <div class=\"x7 cheight  bg-white text-center\" id=\"huiyuanright\">\r\n");
      out.write("                            <div class=\"x12 padding-big\"><img src=\"/imgs/bg-11.jpg\" class=\"w100\"></div>\r\n");
      out.write("                    </div>\r\n");
      out.write("                </div>\r\n");
      out.write("            </div>\r\n");
      out.write("    </div>\r\n");
      out.write("\r\n");
      out.write("</div> \r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("<!-- <div id=\"div_id\"></div> -->\r\n");
      out.write("<style>\r\n");
      out.write(".listwidth{ border-radius: 4px;}\r\n");
      out.write("</style>\r\n");
      out.write("<div class=\"x12\" style=\"background-color:#0B1121; min-width: 1000px;\">\r\n");
      out.write("    <div class=\"navbar bg-black bg-inverse\" id=\"layout-top\" style=\"min-width: 1000px;\">\r\n");
      out.write("        <div class=\"x7 padding-small text-large\">\r\n");
      out.write("        收银台\r\n");
      out.write("               </div>\r\n");
      out.write("        <!-- <div class=\"x5\">\r\n");
      out.write("            <div class=\"x12 text-big padding-small text-right\"><a href=\"http://shop.hookwin.com/index.php/main\">返回系统</a></div>\r\n");
      out.write("        </div> -->\r\n");
      out.write("    </div>\r\n");
      out.write("\r\n");
      out.write("    <div class=\"x12 padding-small-top padding-left padding-right\" id=\"layout-member\" style=\"background-color: #FFFFFF;  min-width:1000px;\">\r\n");
      out.write("        <!-- 会员信息展示区 -->\r\n");
      out.write("        <div class=\"x4 huiyuanzhanshi\">\r\n");
      out.write("            <div class=\"x8 text-center text-large text-dot margin-bottom\" id=\"no-member\" style=\"display: block;\">散客</div>\r\n");
      out.write("            <div class=\"x8 hidden\" id=\"member-info\">\r\n");
      out.write("\r\n");
      out.write("                <div class=\"x3 padding-small-bottom\">\r\n");
      out.write("                    <label>姓名：</label>\r\n");
      out.write("                    <span class=\"member-name\" id=\"namex\"></span>\r\n");
      out.write("                </div>\r\n");
      out.write("                <div class=\"x3 padding-small-bottom\">\r\n");
      out.write("                    <label>会员级别：</label>\r\n");
      out.write("                    <span class=\"member-levelid\"></span>\r\n");
      out.write("                </div>\r\n");
      out.write("                <div class=\"x3 padding-small-bottom\">\r\n");
      out.write("                    <label>卡号：</label>\r\n");
      out.write("                    <span class=\"member-cardno\"></span>\r\n");
      out.write("                </div>\r\n");
      out.write("                \r\n");
      out.write("                <div class=\"x3 padding-small-bottom cashier-member-info\">\r\n");
      out.write("                    <label>手机：</label>\r\n");
      out.write("                    <span class=\"member-mobile\" id=\"mobilex\"></span>\r\n");
      out.write("                </div>\r\n");
      out.write("                <div class=\"x3 padding-small-bottom cashier-member-info\">\r\n");
      out.write("                    <label>可用积分：</label>\r\n");
      out.write("                    <span class=\"member-points\" id=\"pointsx\"></span>\r\n");
      out.write("                </div>\r\n");
      out.write("                <div class=\"x6 padding-small-bottom cashier-balance\">\r\n");
      out.write("                    <label>余额：</label>\r\n");
      out.write("                    <span class=\"member-money\" id=\"moneyx\"></span>\r\n");
      out.write("                     <a id=\"chongzhi\" class=\"member-money-ranage button bg-dot button-little\" href=\"javascript:void(0);\" onclick=\"javascript:$showdialogs($(this));\" data-toggle=\"click\" data-mask=\"1\" data-width=\"800px\" data-url=\"\">充值</a> \r\n");
      out.write("                                            \r\n");
      out.write("                       <!-- <a class=\"member-charge-packages button bg-dot button-little\" href=\"javascript:void(0);\" onclick=\"javascript:$showdialogs($(this));\" def-data-url=\"\" data-toggle=\"click\" data-mask=\"1\" data-width=\"800px\" data-url=\"\">充次</a>\r\n");
      out.write("                        <a href=\"javascript:void(0);\" class=\"member-packages button bg-dot button-little\" onclick=\"javascript:$showdialogs($(this));\" def-data-url=\"\" data-toggle=\"click\" data-mask=\"1\" data-width=\"960px\" data-url=\"\">查看余次</a> -->\r\n");
      out.write("                                    </div>\r\n");
      out.write("            </div>\r\n");
      out.write("\r\n");
      out.write("        </div>\r\n");
      out.write("        <div class=\"x8\" style=\"width: 450px;\">\r\n");
      out.write("            <div class=\"input-inline clearfix\">\r\n");
      out.write("                <input type=\"text\" class=\"input cashier-search-member\" id=\"key-member\" placeholder=\"手机/卡号\" data-url=\"cashierDesk!queryMembers.do\" value=\"\">&nbsp;\r\n");
      out.write("                <button type=\"button\" class=\"button bg-dot margin-small-left\" style=\"float: left;\" onclick=\"javascript:searchMember();\">会员搜索</button>\r\n");
      out.write("                <button type=\"button\" class=\"button bg-dot margin-small-left cashier-search-btn\" style=\" float: left;\" onclick=\"javascript:removeMember();\">散客</button>\r\n");
      out.write("                \r\n");
      out.write("                <button type=\"button\" class=\"button bg-dot margin-small-left cashier-search-btn\" style=\" float: left;\" data-toggle=\"click\" data-mask=\"1\" data-width=\"960px\" data-url=\"vipsInfo!toAddTbMember.do\" onclick=\"javascript:$showdialogs($(this));\"><span class=\"icon-plus\"></span> 新增会员</button>\r\n");
      out.write("            </div>\r\n");
      out.write("        </div>\r\n");
      out.write("    </div>\r\n");
      out.write("<script type=\"text/javascript\">\r\n");
      out.write("$(function(){\r\n");
      out.write("    $('.huiyuanzhanshi').width($('#layout-member').width()-500);\r\n");
      out.write("    $(window).resize(function(){\r\n");
      out.write("        $('.huiyuanzhanshi').width($('#layout-member').width()-500);\r\n");
      out.write("    });\r\n");
      out.write("    $(\"input.treeCombox\").zTreeCombox();\r\n");
      out.write("    //alert($('#layout-member').width()-340);\r\n");
      out.write("});\r\n");
      out.write("</script>\r\n");
      out.write("    <div class=\"x12 padding-small-top\" id=\"layout-main\" style=\"background-color: #0B1121;\">\r\n");
      out.write("        <div class=\"x2 padding bg-white leftw radius\" style=\"width: 280px;\">\r\n");
      out.write("            <div class=\"x12 border-middle margin-bottom\" id=\"layout-buy-order\">\r\n");
      out.write("                <!-- 订单信息 -->\r\n");
      out.write("                <div class=\"x12\">\r\n");
      out.write("                    <div class=\"x3 cashier-left-t\">单号：</div>\r\n");
      out.write("                    <div class=\"x12\"><span class=\"order-num text-little\">");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${orderNum }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("</span></div>\r\n");
      out.write("                </div>\r\n");
      out.write("                <div class=\"x12\">\r\n");
      out.write("                    <div class=\"x4 padding-small-top cashier-left-t1\">商品数量：</div>\r\n");
      out.write("                    <div class=\"x8 text-right cashier-left-t\"><span id=\"buy-car-goods-num\" class=\"text-big text-dot\">0</span></div>\r\n");
      out.write("                </div>\r\n");
      out.write("                <div class=\"x12\">\r\n");
      out.write("                    <div class=\"x3 padding-small-top\">合计：</div>\r\n");
      out.write("                    <div class=\"x9 text-right\"><span id=\"buy-car-goods-money\" class=\"text-big text-dot\">0.00</span>元</div>\r\n");
      out.write("                </div>\r\n");
      out.write("            </div>\r\n");
      out.write("\r\n");
      out.write("            <div class=\"x12 margin-bottom\" id=\"layout-buy-input\">\r\n");
      out.write("                <div class=\"\">\r\n");
      out.write("                    <input class=\"input input-big text-default\" id=\"key-put\" placeholder=\"输入商品名称，回车键搜索\" data-url=\"cashierDesk!queryGoodsByName.do\">\r\n");
      out.write("                </div>\r\n");
      out.write("            </div>\r\n");
      out.write("            <form action=\"cashierDesk!toBilling.do\" id=\"order-data\" class=\"ajaxpost\" method=\"post\">\r\n");
      out.write("            <input type=\"hidden\" name=\"memberId\" id=\"t-member-id\" value=\"\">\r\n");
      out.write("            <input type=\"hidden\" name=\"orderNum\" id=\"t-order-num\" value=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${orderNum }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("\" data-url=\"http://shop.hookwin.com/index.php/cashier/cashier_default/get_ordernum\">\r\n");
      out.write("            <!-- <input type=\"hidden\" name=\"orderId\" value=\"\" id=\"s-b-order-id\"> -->\r\n");
      out.write("            <div class=\"x12\">\r\n");
      out.write("                <input type=\"hidden\" name=\"thebuylineindex\" id=\"the-buy-line-index\" value=\"\" placeholder=\"当前选中产品的ID号\">\r\n");
      out.write("                <ul class=\"buy-car line over-auto border\" style=\"height: 534px;\" id=\"layout-buy-car\">\r\n");
      out.write("                    <li class=\"x12 border-bottom bg-E64E40 default-tpl hidden padding\" data-selected=\"false\" data-li-index=\"\" onclick=\"javascript:clickBuyCar(this);\">\r\n");
      out.write("                        <div class=\"x1 goods-index text-small\">{data-goods-index}</div>\r\n");
      out.write("                        <div class=\"x11\">\r\n");
      out.write("                            <div class=\"x12 text-small\">名称：<strong>{data-goods-name}</strong></div>\r\n");
      out.write("                            <div class=\"x12\">\r\n");
      out.write("                                <div class=\"x6 text-small\">编号：{data-goods-code}</div>\r\n");
      out.write("                                <div class=\"x6 text-right text-small\">\r\n");
      out.write("                                    <span>数量:</span>\r\n");
      out.write("                                    <span class=\"buy-num text-small\">{data-goods-buynum}</span>\r\n");
      out.write("                                </div>\r\n");
      out.write("                            </div>\r\n");
      out.write("                            <div class=\"x12\">\r\n");
      out.write("                                <div class=\"x6\">\r\n");
      out.write("                                    <span>单价：￥</span>\r\n");
      out.write("                                    <span class=\"buy-price text-big\">{data-goods-paymoney}</span>\r\n");
      out.write("                                </div>\r\n");
      out.write("                                <div class=\"x6 text-right\">\r\n");
      out.write("                                    <span>合计：￥</span>\r\n");
      out.write("                                    <span class=\"buy-paymoney text-big\">{data-goods-paymoney}</span>\r\n");
      out.write("                                </div>\r\n");
      out.write("                            </div>\r\n");
      out.write("                        </div>\r\n");
      out.write("                        <input type=\"hidden\" name=\"goods_id\" class=\"goods-id\" value=\"{data-goods-id}\">\r\n");
      out.write("                        <input type=\"hidden\" name=\"goods_price\" class=\"goods-price\" value=\"{data-goods-price}\">\r\n");
      out.write("                        <input type=\"hidden\" name=\"goods_num\" class=\"buy-num\" value=\"{data-goods-buynum}\">\r\n");
      out.write("                    </li>\r\n");
      out.write("                </ul>\r\n");
      out.write("            </div>\r\n");
      out.write("            </form>\r\n");
      out.write("        </div>\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("        <div class=\"x1 padding-small-left padding-small-right centerw casier-cz-btn\">\r\n");
      out.write("            <!-- 按钮区 -->\r\n");
      out.write("            <div class=\"x12 margin-small-bottom\">\r\n");
      out.write("            <button class=\"button button-big bg-white button-block\" onclick=\"javascript:clickPlus();\">\r\n");
      out.write("            <span class=\"icon-plus\"></span></button></div>\r\n");
      out.write("            <div class=\"x12 margin-small-bottom\">\r\n");
      out.write("            <button class=\"button button-big bg-white button-block\" onclick=\"javascript:clickMinus();\">\r\n");
      out.write("            <span class=\"icon-minus\"></span></button></div>\r\n");
      out.write("\r\n");
      out.write("            <div class=\"x12 margin-small-bottom\">\r\n");
      out.write("            <!-- <button class=\"button button-big bg-white button-block\" onclick=\"javascript:toOrderPackages(this);\" id=\"packages-order\" data-url=\"\" data-success-url=\"\">充次结算</button> -->\r\n");
      out.write("            </div>\r\n");
      out.write("            <div class=\"x12 margin-small-bottom\"><button class=\"button button-big bg-white button-block bg-dot\" onclick=\"javascript:toOrder();\">结算(/)</button></div>\r\n");
      out.write("\r\n");
      out.write("            <div class=\"x12 margin-small-bottom\"><button class=\"button button-big bg-white button-block\" onclick=\"javascript:clickPlusNum();\">数量(*)</button></div>\r\n");
      out.write("            <div class=\"x12 margin-small-bottom\"><button class=\"button button-big bg-white button-block\" onclick=\"javascript:clickDelete();\">删除</button></div>\r\n");
      out.write("            <div class=\"x12 margin-small-bottom\"><button class=\"button button-big bg-white button-block\" onclick=\"javascript:removeBuyCar();\">清空</button></div>\r\n");
      out.write("            <!--\r\n");
      out.write("            <div class=\"x12 margin-bottom\"><button class=\"button button-large bg-white\" onclick=\"javascript:x();\">退货(t)</button></div>\r\n");
      out.write("            -->\r\n");
      out.write("            <div class=\"x12 margin-small-bottom\">\r\n");
      out.write("            <!-- <button class=\"button button-big bg-white button-block\" onclick=\"javascript:toTmpOrder();\" id=\"to-tmp-order\" data-url=\"\">挂单</button> -->\r\n");
      out.write("            </div>\r\n");
      out.write("            <div class=\"x12 margin-small-bottom\">\r\n");
      out.write("            <button class=\"button button-big bg-white button-block\" onclick=\"javascript:toNotSettledOrder();\" id=\"to-no-settled-order\" data-url=\"cashierDesk!toWeiJieSuan.do\">未完订单</button></div>\r\n");
      out.write("\r\n");
      out.write("        </div>\r\n");
      out.write("        <div class=\"x9 rightw\" style=\"min-width: 570px;\">\r\n");
      out.write("            <div class=\"x12 bg-white margin-small-bottom padding-small-top padding-small-left padding-small-right radius\" id=\"layout-goods-type\" style=\"width: 100%;\">\r\n");
      out.write("                  <div class=\"button-group border-red goods-types\">\r\n");
      out.write("                   <!--  <button type=\"button\" class=\"button margin-small-bottom active\" onclick=\"javascript:goods_list(this);\" data-url=\"http://shop.hookwin.com/index.php/cashier/cashier_default/goods_list/101100\">示例分类</button>\r\n");
      out.write("                    <button type=\"button\" class=\"button margin-small-bottom\" onclick=\"javascript:goods_list(this);\" data-url=\"http://shop.hookwin.com/index.php/cashier/cashier_default/goods_list/109395\">大威德哇</button> -->\r\n");
      out.write("                   <!--  <button type=\"button\" class=\"button margin-small-bottom\" onclick=\"ajaxload('cashierDesk!queryGoodsType.do','_layout');\">选择分类</button> -->\r\n");
      out.write("                  \t<span class=\"button margin-small-bottom active\">商品类：</span>\r\n");
      out.write("                    <input  type=\"text\" id=\"goodClass\" name=\"classId \" class=\"treeCombox\" style=\"height:34px;cursor:hand;\" readonly value=\"\" size=\"20\"\t\t\t\t\t\r\n");
      out.write("\t\t\t\t\t\tdataUrl=\"cashierDesk!treeAllNodes.do\"  callBack=\"javascript:selectCallback();\" container=\"layout-main\" class=\"treeCombox\" placeholder=\"点击选择\" /> \r\n");
      out.write("                \r\n");
      out.write("                 </div> \r\n");
      out.write("                \r\n");
      out.write("            </div>\r\n");
      out.write("           \r\n");
      out.write("    <div id=\"goods-list\" class=\"x12 margin-bottom\" style=\"width: 100%; height: 572px;\">\r\n");
      out.write("    <div id=\"goods\" class=\"x12 over-auto\" id=\"layout-goods-list\" style=\"height: 526px;\">\r\n");
      out.write("  \r\n");
      out.write(" \r\n");
      out.write("  </div>\r\n");
      out.write("\t\r\n");
      out.write("<script type=\"text/javascript\">\r\n");
      out.write("    $(function(){\r\n");
      out.write("       autoFullHeight();\r\n");
      out.write("        $('.imgbyw').css('width',($('.listwidth').width()-$('.imgwidth').width()-10));\r\n");
      out.write("        $(window).resize(function(){\r\n");
      out.write("           $('.imgbyw').css('width',($('.listwidth').width()-$('.imgwidth').width()-10));\r\n");
      out.write("        });\r\n");
      out.write("    });\r\n");
      out.write("    \r\n");
      out.write("    function selectCallback(){\r\n");
      out.write("         $(\"#autoX12\").remove();\r\n");
      out.write("\t\t $(\"#goods\").after(\"<div id='autoX12' class='x12 padding-top text-right page-h'></div>\");\r\n");
      out.write("\t\t \t//商品分页\r\n");
      out.write("\t\t$(\".page-h\").pagination({\r\n");
      out.write("\t\t\tpageIndex:0,\r\n");
      out.write("\t\t\tpageSize:5,\r\n");
      out.write("\t\t\tshowFirstLastBtn:true,\r\n");
      out.write("\t\t\tfirstBtnText:\"首页\",\r\n");
      out.write("\t\t\tlastBtnText:\"尾页\",\r\n");
      out.write("\t\t\tprevBtnText:\"上一页\",\r\n");
      out.write("\t\t\tnextBtnText:\"下一页\",\r\n");
      out.write("\t\t\tshowInfo:true,\r\n");
      out.write("\t\t\tinfoFormat:\"第{start}~{end}条                  共 {total}条\",\r\n");
      out.write("\t\t\tnoInfoText:\"没有数据记录\",\r\n");
      out.write("\t\t\tshowJump:true,\r\n");
      out.write("\t\t\tshowPageSizes:true,\r\n");
      out.write("\t\t\tpageSizeItems:[5,10,15,20],\r\n");
      out.write("\t\t\tremote:{\r\n");
      out.write("\t\t\t\t\turl:\"cashierDesk!queryGoods.do\",\r\n");
      out.write("\t\t\t\t\tparams:{\"classId\":$(\"#goodClass\").attr(\"nodevalue\")},\r\n");
      out.write("\t\t\t\t\tpageParams:function(data){\r\n");
      out.write("\t\t\t\t\t\treturn {\r\n");
      out.write("\t\t\t\t\t\t\tpageIndex:data.pageIndex*data.pageSize,\r\n");
      out.write("\t\t\t\t\t\t\tpageSize:data.pageSize\r\n");
      out.write("\t\t\t\t\t\t};\r\n");
      out.write("\t\t\t\t\t},\r\n");
      out.write("\t\t\t\tsuccess:function(data){\r\n");
      out.write("\t\t\t\t\tvar index=$(\".page-h\").pagination(\"getPageIndex\");\r\n");
      out.write("\t\t\t\t\tvar size=$(\".page-h\").pagination(\"getPageSize\");\r\n");
      out.write("\t\t\t\t\tvar json=eval(data).model;\r\n");
      out.write("\t\t\t\t\t\r\n");
      out.write("\t\t\t\t\t$(\"#goods\").empty();\r\n");
      out.write("\t\t\t\t\t$.each(json,function(i,j){\r\n");
      out.write("\t\t\t\t\t\r\n");
      out.write("\t\t\t\t\tvar goodsJson ={\"goodsId\":j[1],\"goodsName\":j[2],\"goodsSellPrice\":j[4],\"goodsPromotionPrice\":j[3]};\r\n");
      out.write("\t\t\t\t\t//截取商品图片路径的第一张图片路径\r\n");
      out.write("\t\t\t\t\tvar imgPath\t= j[0].substring(0,j[0].indexOf(\";\"));\r\n");
      out.write("\t\t\t\t\t\t$goods=$(\r\n");
      out.write("\t\t\t\t\t\t\t\"商品编号：<div class='xb4 xs6 margin-small-bottom padding-small-right'\"+ \r\n");
      out.write("\t\t\t\t\t\t\t\"onclick='javascript:moreAddBuycar(this);' data-json=\"+$.toJSON(goodsJson)+\">\"+\r\n");
      out.write("    \t\t\t\t\t\t\"<div class='x12 bg-white padding-small listwidth'>\"+\r\n");
      out.write("        \t\t\t\t\t\"<div class='x2 float-left imgwidth' style='width: 80px;'><img src='viewPic!viewDisk.do?path=\"+imgPath+\"'\"+\r\n");
      out.write("        \t\t\t\t\t \"class='radius  border' style='width: 80px;height:80px;'></div>\"+\r\n");
      out.write("        \t\t\t\t\t\"<div class='x10 media-body imgbyw padding-left' style='width: 190px;'>\"+\r\n");
      out.write("\t\t\t\t            \"<div class='x12 text-small' title='3'>商品编号：\"+j[1]+\"</div>\"+\r\n");
      out.write("\t\t\t\t            \"<div class='x12 text-small'>商品名称：\"+j[2]+\"</div>\"+\r\n");
      out.write("\t\t\t\t            \"<div class='x6 text-left'>原价：￥<del>\"+j[3]+\"</del></div>\"+\r\n");
      out.write("\t\t\t\t            \"<div class='x6 text-right'>促销价：￥<span class='text-big text-dot'>\"+j[4]+\"</span></div>\"+\r\n");
      out.write("\t\t\t\t\t        \"</div></div></div>\");\r\n");
      out.write("\t\t\t\t\t\t$(\"#goods\").append($goods);\r\n");
      out.write("\t\t\t\t\t\t\r\n");
      out.write("\t\t\t\t\t}); \r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t});\r\n");
      out.write("\t\r\n");
      out.write("\t\t \t\t\r\n");
      out.write("    }\r\n");
      out.write("</script>\r\n");
      out.write("\r\n");
      out.write("</div>\r\n");
      out.write("\r\n");
      out.write("            <div class=\"x12 bg-white padding\" id=\"status-info\" style=\"width: 100%; display: none;\">\r\n");
      out.write("                操作状态提示区            </div>\r\n");
      out.write("        </div>\r\n");
      out.write("\r\n");
      out.write("    </div>\r\n");
      out.write("\r\n");
      out.write("    <!-- 点击数量出来的浮层-->\r\n");
      out.write("    <div class=\"click-num\">\r\n");
      out.write("      <div class=\"dialog\">\r\n");
      out.write("        <div class=\"dialog-head\">\r\n");
      out.write("          <span class=\"close rotate-hover\"></span>\r\n");
      out.write("          <strong>请输入数量</strong>\r\n");
      out.write("        </div>\r\n");
      out.write("        <div class=\"dialog-body\" style=\"height: 100px;\">\r\n");
      out.write("          <input type=\"text\" class=\"input input-big click-num-input\" value=\"\">\r\n");
      out.write("        </div>\r\n");
      out.write("        <div class=\"dialog-foot\">\r\n");
      out.write("          <button type=\"button\" class=\"button dialog-close\">取消</button>\r\n");
      out.write("          <button type=\"button\" class=\"button bg-green\" onclick=\"javascript:sumClickPlusNum();\">确认</button>\r\n");
      out.write("        </div>\r\n");
      out.write("      </div>\r\n");
      out.write("    </div>\r\n");
      out.write("    <!-- 搜索的时候，出来了多个商品-->\r\n");
      out.write("    <div class=\"search-more\">\r\n");
      out.write("      <div class=\"dialog\">\r\n");
      out.write("        <div class=\"dialog-head\">\r\n");
      out.write("          <span class=\"close rotate-hover\"></span>\r\n");
      out.write("          <strong>请选择商品</strong>\r\n");
      out.write("        </div>\r\n");
      out.write("        <div class=\"dialog-body line over-auto\" style=\"height: 300px;\">\r\n");
      out.write("\r\n");
      out.write("        </div>\r\n");
      out.write("        <div class=\"dialog-foot\">\r\n");
      out.write("          <button type=\"button\" class=\"button dialog-close\">取消</button>\r\n");
      out.write("          <button type=\"button\" class=\"button bg-green\" onclick=\"javascript:moreAddBuycar();\">确认</button>\r\n");
      out.write("        </div>\r\n");
      out.write("      </div>\r\n");
      out.write("    </div>\r\n");
      out.write("    <!-- 搜索的时候，出来了多个会员-->\r\n");
      out.write("    <div class=\"member-more\">\r\n");
      out.write("      <div class=\"dialog\">\r\n");
      out.write("        <div class=\"dialog-head\">\r\n");
      out.write("          <span class=\"close rotate-hover\"></span>\r\n");
      out.write("          <strong>请选择会员</strong>\r\n");
      out.write("        </div>\r\n");
      out.write("        <div class=\"dialog-body line over-auto\" style=\"height: 300px;\">\r\n");
      out.write("\r\n");
      out.write("        </div>\r\n");
      out.write("        <div class=\"dialog-foot\">\r\n");
      out.write("          <button type=\"button\" class=\"button dialog-close\">取消</button>\r\n");
      out.write("          <button type=\"button\" class=\"button bg-green\" onclick=\"javascript:moreAddMember();\">确认</button>\r\n");
      out.write("        </div>\r\n");
      out.write("      </div>\r\n");
      out.write("    </div>\r\n");
      out.write("</div>\r\n");
      out.write("<script type=\"text/javascript\">\r\n");
      out.write("/****** 充次成功后的回调 ***/\r\n");
      out.write("function packagesSuccess(jsondata,memberId){\r\n");
      out.write("   var json_obj = $.evalJSON(jsondata);\r\n");
      out.write("   //console.info(json_obj);\r\n");
      out.write("   var $the_buy_car_line = $('.buy-car li');\r\n");
      out.write("    //扣掉被充次抵掉的数量\r\n");
      out.write("    $the_buy_car_line.each(function(){\r\n");
      out.write("        var $the_li = $(this);\r\n");
      out.write("        if(!$the_li.hasClass('default-tpl')){\r\n");
      out.write("            $(json_obj).each(function(){\r\n");
      out.write("                if($(this)[0].goods_id==$the_li.find('.goods-id').val()){\r\n");
      out.write("                    var sy_num =  parseInt(parseInt($the_li.find('.buy-num').text())-parseInt($(this)[0].buy_num));//抵掉后剩余的数量\r\n");
      out.write("                    //console.info(parseInt($the_li.find('.buy-num').text()),parseInt($(this)[0].buy_num),sy_num);\r\n");
      out.write("                        sy_num2 = Math.max(0,sy_num);\r\n");
      out.write("                        //console.info($($the_li).find('.buy-paymoney').text());\r\n");
      out.write("                    var sy_money = sy_num2*parseFloat($($the_li).find('.buy-price').text()); //抵掉后该支付的钱\r\n");
      out.write("                    $the_li.find('span[class~=buy-paymoney]').text(sy_money.toFixed(2));\r\n");
      out.write("                    $the_li.find('span[class~=buy-num]').text(sy_num2);\r\n");
      out.write("                    $the_li.find('input[class~=buy-num]').val(sy_num2);\r\n");
      out.write("                    if(sy_num2==0){\r\n");
      out.write("                         // 全部抵完了，移出这行\r\n");
      out.write("                         $the_li.remove();\r\n");
      out.write("                    }\r\n");
      out.write("                    //将未完的给下条继续抵掉\r\n");
      out.write("                    $(this)[0].buy_num=(sy_num>0)?(0):(Math.abs(sy_num));\r\n");
      out.write("                }\r\n");
      out.write("           });\r\n");
      out.write("        }\r\n");
      out.write("    });\r\n");
      out.write("    //重新合计\r\n");
      out.write("    sumBuyCar();\r\n");
      out.write("    //检查还有没有剩余的，如果有，就等到继续收银，如果没有，就弹出收银成功的通知页面\r\n");
      out.write("    if($('.buy-car li').length>1){\r\n");
      out.write("        closeDialogs();\r\n");
      out.write("        return false;\r\n");
      out.write("    }else{\r\n");
      out.write("        //将数据转换为url参数\r\n");
      out.write("        var param = parseParam(json_obj);\r\n");
      out.write("        $.Hidemsg();\r\n");
      out.write("        //打开一个浮层来显示\r\n");
      out.write("        var b = {};\r\n");
      out.write("        b['data-toggle']='click';\r\n");
      out.write("        b['data-url']=$('#packages-order').attr('data-success-url')+\"?packages_print=1&t_member_id=\"+memberId+\"&\"+param;\r\n");
      out.write("        b['data-mask']='1';\r\n");
      out.write("        b['data-width']='300px';\r\n");
      out.write("        var $win = $showdialogs($(b));\r\n");
      out.write("    }\r\n");
      out.write("}\r\n");
      out.write("/****** 自动铺满全屏高度 ***/\r\n");
      out.write("function autoFullHeight(){\r\n");
      out.write("    //var full_height = $(window).height();\r\n");
      out.write("    var full_height=window.innerHeight;\r\n");
      out.write("    var layout_main = full_height-$('#layout-top').height()-$('#layout-member').height()-30;\r\n");
      out.write("    //$('#layout-main').height(layout_main);\r\n");
      out.write("    var layout_buy_car = layout_main-$('#layout-buy-order').height()-$('#layout-buy-input').height()-22;\r\n");
      out.write("    $('#layout-buy-car').height(layout_buy_car);\r\n");
      out.write("    var goods_list_height = layout_main-$('#layout-goods-type').height()-$('#status-info').height()-56;\r\n");
      out.write("    $('#goods-list').height(goods_list_height);\r\n");
      out.write("    $('#layout-goods-list').height($('#goods-list').height()-$('#layout-page').height()-10);\r\n");
      out.write("}\r\n");
      out.write("/****** 点击产品分类 *****/\r\n");
      out.write("function goods_list(xthis){\r\n");
      out.write("    if(xthis==undefined){\r\n");
      out.write("        var $xthis = $('.goods-types').children('button').first();\r\n");
      out.write("    }else{\r\n");
      out.write("        var $xthis = $(xthis);\r\n");
      out.write("    }\r\n");
      out.write("    if($xthis.length==0){\r\n");
      out.write("        return false;\r\n");
      out.write("    }\r\n");
      out.write("    var uri = $xthis.attr('data-url');\r\n");
      out.write("    $('#goods-list').html('');\r\n");
      out.write("    $.get(uri,function(data){\r\n");
      out.write("        $('#goods-list').html(data);\r\n");
      out.write("        $xthis.siblings().removeClass('active');\r\n");
      out.write("        $xthis.addClass('active');\r\n");
      out.write("    });\r\n");
      out.write("}\r\n");
      out.write("/**** 刷新收银 ****/\r\n");
      out.write("function refCashier(){\r\n");
      out.write("    removeMember();//会员变成散客\r\n");
      out.write("    removeBuyCar();//左边购物车清空\r\n");
      out.write("    getNextOrdernum();//重新获取一个新订单号\r\n");
      out.write("    $('#s-b-order-id').val('');//挂单号清空\r\n");
      out.write("    //关闭所有浮层\r\n");
      out.write("    $('.dialog-mask').remove();\r\n");
      out.write("    $('.dialog-win').remove();\r\n");
      out.write("}\r\n");
      out.write("/*** 充次结算按钮 **/\r\n");
      out.write("function toOrderPackages(xthis){\r\n");
      out.write("    //检查是不是已经弹出一个了\r\n");
      out.write("    var $dialogwin_input = $('.dialog-win');\r\n");
      out.write("    if($dialogwin_input.length>0){\r\n");
      out.write("        return false;\r\n");
      out.write("    }\r\n");
      out.write("    //将数据拿去后台生成一个订单，\r\n");
      out.write("    var $form = $('#order-data');\r\n");
      out.write("    //$form.submit();\r\n");
      out.write("    //return false;\r\n");
      out.write("    var $post_data = $form.serializeArray();\r\n");
      out.write("    //console.info($post_data);\r\n");
      out.write("    //打开一个浮层来显示\r\n");
      out.write("    var b = {};\r\n");
      out.write("    b['data-toggle']='click';\r\n");
      out.write("    b['data-url']=$(\"#packages-order\").attr('data-url');\r\n");
      out.write("    b['data-mask']='1';\r\n");
      out.write("    b['data-postdata']=$post_data;\r\n");
      out.write("    b['data-width']='800px';\r\n");
      out.write("    var $win = $showdialogs($(b));\r\n");
      out.write("    $win.find('.click-num-input').val('').focus();\r\n");
      out.write("}\r\n");
      out.write("/*** 结算按钮 **/\r\n");
      out.write("function toOrder(){\r\n");
      out.write("\tvar goodList = $(\"#layout-buy-car>li\").length;\r\n");
      out.write("\t//alert(goodList);\r\n");
      out.write("\tif (goodList==1) {\r\n");
      out.write("\t\t\t$.Showmsg(\"你一个商品都没有买，好吧\");\r\n");
      out.write("\t\t\tsetTimeout(function() {\r\n");
      out.write("                            $.Hidemsg();\r\n");
      out.write("    \t\t\t\t    }, 3500);\r\n");
      out.write("\t\treturn;\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t\r\n");
      out.write("    shopTuiSongZhiPing();\r\n");
      out.write("\r\n");
      out.write("    //检查是不是已经弹出一个了\r\n");
      out.write("    var $dialogwin_input = $('.dialog-win');\r\n");
      out.write("    if($dialogwin_input.length>0){\r\n");
      out.write("        return false;\r\n");
      out.write("    }\r\n");
      out.write("    //将数据拿去后台生成一个订单，\r\n");
      out.write("    var $form = $('#order-data');\r\n");
      out.write("    //$form.submit();\r\n");
      out.write("    //return false;\r\n");
      out.write("\r\n");
      out.write("    var $post_data = $form.serializeArray();\r\n");
      out.write("    //console.info($post_data);\r\n");
      out.write("    //打开一个浮层来显示\r\n");
      out.write("    var b = {};\r\n");
      out.write("    b['data-toggle']='click';\r\n");
      out.write("    b['data-url']=$form.attr('action');\r\n");
      out.write("    b['data-mask']='1';\r\n");
      out.write("    b['data-postdata']=$post_data;\r\n");
      out.write("    b['data-width']='800px';\r\n");
      out.write("    var $win = $showdialogs($(b));\r\n");
      out.write("    $win.find('.click-num-input').val('').focus();\r\n");
      out.write("}\r\n");
      out.write("/*** 挂单按钮 **/\r\n");
      out.write("function toTmpOrder(){\r\n");
      out.write("    //检查是不是已经弹出一个了\r\n");
      out.write("    var $dialogwin_input = $('.dialog-win');\r\n");
      out.write("    if($dialogwin_input.length>0){\r\n");
      out.write("        return false;\r\n");
      out.write("    }\r\n");
      out.write("    //将数据拿去后台生成一个订单，\r\n");
      out.write("    var $form = $('#order-data');\r\n");
      out.write("    var $post_data = $form.serializeArray();\r\n");
      out.write("    //打开一个浮层来显示\r\n");
      out.write("    var b = {};\r\n");
      out.write("    b['data-toggle']='click';\r\n");
      out.write("    b['data-url']=$('#to-tmp-order').attr('data-url');\r\n");
      out.write("    b['data-mask']='1';\r\n");
      out.write("    b['data-postdata']=$post_data;\r\n");
      out.write("    b['data-width']='960px';\r\n");
      out.write("    var $win = $showdialogs($(b));\r\n");
      out.write("    $win.find('.click-num-input').val('').focus();\r\n");
      out.write("}\r\n");
      out.write("/*** 处理未支付完成的订单按钮 **/\r\n");
      out.write("function toNotSettledOrder(){\r\n");
      out.write("    //检查是不是已经弹出一个了\r\n");
      out.write("    var $dialogwin_input = $('.dialog-win');\r\n");
      out.write("    if($dialogwin_input.length>0){\r\n");
      out.write("        return false;\r\n");
      out.write("    }\r\n");
      out.write("    //将数据拿去后台生成一个订单，\r\n");
      out.write("    var $form = $('#order-data');\r\n");
      out.write("    var $post_data = $form.serializeArray();\r\n");
      out.write("    //打开一个浮层来显示\r\n");
      out.write("    var b = {};\r\n");
      out.write("    b['data-toggle']='click';\r\n");
      out.write("    b['data-url']=$('#to-no-settled-order').attr('data-url');\r\n");
      out.write("    b['data-mask']='1';\r\n");
      out.write("    b['data-postdata']=$post_data;\r\n");
      out.write("    b['data-width']='1060px';\r\n");
      out.write("    var $win = $showdialogs($(b));\r\n");
      out.write("    $win.find('.click-num-input').val('').focus();\r\n");
      out.write("}\r\n");
      out.write("/****** 挂单成功，或选择一个挂单  *****/\r\n");
      out.write("function toTmpOrderAdd(xthis){\r\n");
      out.write("    var $row = $(xthis);\r\n");
      out.write("    //先刷新重新收银\r\n");
      out.write("    removeMember();//会员变成散客\r\n");
      out.write("    removeBuyCar();//左边购物车清空\r\n");
      out.write("    var json_obj = $.evalJSON($row.attr('data-json'));\r\n");
      out.write("    //console.info(json_obj);\r\n");
      out.write("    $(json_obj.goods_detail).each(function(){\r\n");
      out.write("        //console.info($(this),$(this)[0].goods_id);\r\n");
      out.write("        addBuyCar(($(this)[0].goods_info),$(this)[0].buy_num);\r\n");
      out.write("    });\r\n");
      out.write("    $('#s-b-order-id').val(json_obj.s_b_order_id);\r\n");
      out.write("    //会员信息\r\n");
      out.write("    if(json_obj.member_info.length!=0){\r\n");
      out.write("        addMember(json_obj.member_info);\r\n");
      out.write("    }\r\n");
      out.write("    //重新合计\r\n");
      out.write("    sumBuyCar();\r\n");
      out.write("    closeDialogs();\r\n");
      out.write("    shopTuiSongZhiPing();\r\n");
      out.write("}\r\n");
      out.write("/****** 获取下一个订单号  *******/\r\n");
      out.write("function getNextOrdernum(){\r\n");
      out.write("    var $order_obj = $('#t-order-num');\r\n");
      out.write("    var uri = $order_obj.attr('data-url');\r\n");
      out.write("    $.get(uri,function(data,s,xhr){\r\n");
      out.write("    \tvar sessionStatus = xhr.getResponseHeader(\"sessionstatus\");\r\n");
      out.write("    \tvar redirectLocation = xhr.getResponseHeader(\"location\");\r\n");
      out.write("   \t\tif(sessionStatus==\"sessionTimeOut\"){\t\t\t\t      \r\n");
      out.write("      \t\t$.Showmsg(data.message);\r\n");
      out.write("      \t\twindow.setTimeout(function(){\r\n");
      out.write("      \t\t\twindow.location=redirectLocation;\r\n");
      out.write("      \t\t},2000);\r\n");
      out.write("      \t\treturn;\r\n");
      out.write("     \t}\r\n");
      out.write("        $order_obj.val(data.order_num);\r\n");
      out.write("        $('.order-num').text(data.order_num);\r\n");
      out.write("    },'json');\r\n");
      out.write("}\r\n");
      out.write("/***** 移出会员信息变成散客 ****/\r\n");
      out.write("function removeMember(){\r\n");
      out.write("    var $member_info = $('#member-info');\r\n");
      out.write("    $member_info.find('.member-name').text('');\r\n");
      out.write("    $member_info.find('.member-levelid').text('');\r\n");
      out.write("    $member_info.find('.member-cardno').text('');\r\n");
      out.write("    $member_info.find('.member-idcard').text('');\r\n");
      out.write("    $member_info.find('.member-mobile').text('');\r\n");
      out.write("    $member_info.find('.member-points').text('');\r\n");
      out.write("    $member_info.find('.member-money').text('');\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("    //输入会员资料到表单\r\n");
      out.write("    $('#t-member-id').val('');\r\n");
      out.write("\t\r\n");
      out.write("    //改变2个按钮的功能\r\n");
      out.write("    $member_info.find('.member-money-ranage').attr('data-url','');\r\n");
      out.write("    $member_info.find('.member-packages').attr('data-url','');\r\n");
      out.write("\r\n");
      out.write("    //隐掉散客\r\n");
      out.write("    $('#no-member').show();\r\n");
      out.write("    //显示会员信息\r\n");
      out.write("    $member_info.addClass('hidden');\r\n");
      out.write("\r\n");
      out.write("    $('#key-member').val('');//清空会员搜索框内容\r\n");
      out.write("    $('#key-put').val('').focus(); //焦点回到商品默认到输入框\r\n");
      out.write("\r\n");
      out.write("}\r\n");
      out.write("/***** 写入会员信息进表单 ****/\r\n");
      out.write("function addMember(jsondata){\r\n");
      out.write("    var $member_info = $('#member-info');\r\n");
      out.write("    $member_info.find('.member-name').text(jsondata[0]);\r\n");
      out.write("    $member_info.find('.member-levelid').text(jsondata[1]);\r\n");
      out.write("    $member_info.find('.member-cardno').text(jsondata[2]);\r\n");
      out.write("    \r\n");
      out.write("    $member_info.find('.member-mobile').text(jsondata[3]);\r\n");
      out.write("    $member_info.find('.member-points').text(jsondata[4]);\r\n");
      out.write("    $member_info.find('.member-money').text(jsondata[5]);\r\n");
      out.write("\r\n");
      out.write("    //输入会员资料到表单\r\n");
      out.write("    $('#t-member-id').val(jsondata[6]);\r\n");
      out.write("    \r\n");
      out.write("    $('#chongzhi').attr(\"data-url\",\"recharge!toRecharge.do?memberId=\"+jsondata[6]);\r\n");
      out.write("    \r\n");
      out.write("\t\r\n");
      out.write("\t\r\n");
      out.write("    //改变2个按钮的功能\r\n");
      out.write("    \r\n");
      out.write("    $member_info.find('.member-packages').attr('data-url',$member_info.find('.member-packages').attr('def-data-url')+'/'+jsondata.t_member_id+'/'+jsondata.t_member_id);\r\n");
      out.write("\r\n");
      out.write("    //隐掉散客\r\n");
      out.write("    $('#no-member').hide();\r\n");
      out.write("    //显示会员信息\r\n");
      out.write("    $member_info.removeClass('hidden');\r\n");
      out.write("\r\n");
      out.write("    $('#key-member').val('');//清空会员搜索框内容\r\n");
      out.write("    $('#key-put').val('').focus(); //焦点回到商品默认到输入框\r\n");
      out.write("\r\n");
      out.write("}\r\n");
      out.write("/*** 更多会员点击或回画进入buy-car **/\r\n");
      out.write("function moreAddMember(xthis){\r\n");
      out.write("    if(xthis==undefined){\r\n");
      out.write("        var $obj = $('.more-member li[data-selected=true]');\r\n");
      out.write("    }else{\r\n");
      out.write("         var $obj = $(xthis);\r\n");
      out.write("    }\r\n");
      out.write("     var jsondata = $.evalJSON($obj.attr('data-json'));\r\n");
      out.write("    addMember(jsondata);\r\n");
      out.write("    //关闭浮层\r\n");
      out.write("    closeDialogs($obj.closest('.dialog-win'));\r\n");
      out.write("}\r\n");
      out.write("/***** 会员搜索 *****/\r\n");
      out.write("function searchMember(){\r\n");
      out.write("\r\n");
      out.write("    var $key_put = $('#key-member');\r\n");
      out.write("    var key_str = $key_put.val().replace(/(^\\s*)|(\\s*$)/g, \"\");\r\n");
      out.write("    var uir = $key_put.attr('data-url')+\"?parameter=\"+encodeURIComponent(key_str);\r\n");
      out.write("    $.get(uir,function(data,s,xhr){\r\n");
      out.write("        var sessionStatus = xhr.getResponseHeader(\"sessionstatus\");\r\n");
      out.write("\t   \tvar redirectLocation = xhr.getResponseHeader(\"location\");\r\n");
      out.write("  \t\tif(sessionStatus==\"sessionTimeOut\"){\t\t\t\t      \r\n");
      out.write("     \t\t$.Showmsg(data.message);\r\n");
      out.write("     \t\twindow.setTimeout(function(){\r\n");
      out.write("     \t\t\twindow.location=redirectLocation;\r\n");
      out.write("     \t\t},2000);\r\n");
      out.write("     \t\treturn;\r\n");
      out.write("    \t}\r\n");
      out.write("        //console.info(data.length);\r\n");
      out.write("        if(data.model.length==0){\r\n");
      out.write("            //没有找到商品\r\n");
      out.write("            //statusInfo(\"没有找到符合条件的会员【\"+key_str+\"】，请核查该会员是否存在或已被冻结、禁用！\");\r\n");
      out.write("            $.Showmsg(\"没有找到符合条件的会员【\"+key_str+\"】，请核查该会员是否存在或已被冻结、禁用！\");\r\n");
      out.write("            $('#no-member').show();\r\n");
      out.write("           var cpuhao=navigator.userAgent;\r\n");
      out.write("           /*  if(cpuhao.indexOf('GangHengKeJi')>=0){\r\n");
      out.write("                var huiyuanx=\"散客\";\r\n");
      out.write("                JS_FK._cr(huiyuanx,'tuisongleirong2');\r\n");
      out.write("            } */\r\n");
      out.write("            \r\n");
      out.write("\t\t\t$(\"#member-info\").remove();\r\n");
      out.write("            return false;\r\n");
      out.write("        }\r\n");
      out.write("        if(data.model.length==1){\r\n");
      out.write("            //只有一条记录，直接压入会员信息\r\n");
      out.write("            addMember(data.model[0]);\r\n");
      out.write("            var cpuhao=navigator.userAgent;\r\n");
      out.write("           /*  if(cpuhao.indexOf('GangHengKeJi')>=0){\r\n");
      out.write("                var huiyuanx=\"<div class='x12 height text-big'><div class='x6'>会员：\"+data.model[0][0]+\"</div><div class='x6'>手机号：\"+data.model[0][0]+\"</div></div><div class='x12  height  text-big'><div class='x6'>余额：\"+data.model[0][0]+\"</div><div class='x6'>会员积分：\"+data.model[0][0]+\"</div></div>\";\r\n");
      out.write("                JS_FK._cr(huiyuanx,'tuisongleirong2');\r\n");
      out.write("            } */\r\n");
      out.write("        }else{\r\n");
      out.write("            //有多个商品记录弹出下拉浮层来选择 选中后放入到会员信息()\r\n");
      out.write("            var li_html = \"<ul class='more-member x12'>\";\r\n");
      out.write("            for(i=0;i<data.model.length;i++){\r\n");
      out.write("                //console.info($.toJSON(data[i]));\r\n");
      out.write("                li_html += \"<li class='x12 border-bottom margin-little padding-bottom' onclick='javascript:moreAddMember(this);' data-json=\\'\";\r\n");
      out.write("                li_html += $.toJSON(data.model[i]);\r\n");
      out.write("                li_html += \"\\'>\";\r\n");
      out.write("                li_html += \"<div class='x1'>\"+(i+1)+\"</div>\";\r\n");
      out.write("                li_html += \"<div class='x11'>\";\r\n");
      out.write("                li_html += \"<div class='x12'>\"+data.model[i][0]+\"</div>\";\r\n");
      out.write("                li_html += \"<div class='x6'>\"+data.model[i][3]+\"</div>\";\r\n");
      out.write("                li_html += \"<div class='x6'>\"+data.model[i][2]+\"</div>\";\r\n");
      out.write("                li_html += \"</div>\";\r\n");
      out.write("                li_html += \"</li>\";\r\n");
      out.write("            }\r\n");
      out.write("            li_html += \"</ul>\";\r\n");
      out.write("\r\n");
      out.write("            //打开一个浮层来加载\r\n");
      out.write("            var b = {};\r\n");
      out.write("            b[\"data-toggle\"]=\"click\";\r\n");
      out.write("            b[\"data-target\"]=\".member-more\";\r\n");
      out.write("            b[\"data-mask\"]=\"1\";\r\n");
      out.write("            b[\"data-width\"]=\"600px\";\r\n");
      out.write("            var $win = $showdialogs($(b));\r\n");
      out.write("            $win.find(\".dialog-body\").html(li_html);\r\n");
      out.write("            //把第一个的设置为选中\r\n");
      out.write("            $win.find(\"ul[class~=more-member]>li\").mouseover(function(){\r\n");
      out.write("                 $(this).addClass(\"bg-E64E40\");\r\n");
      out.write("            }).mouseout(function(){\r\n");
      out.write("              $(this).removeClass(\"bg-E64E40\");\r\n");
      out.write("            });\r\n");
      out.write("           /// var $new = $win.find(\"ul[class~=more-member]>li\").first();\r\n");
      out.write("           /// $new.attr(\"data-selected\",\"true\");\r\n");
      out.write("           // $new.addClass(\"bg-E64E40\");\r\n");
      out.write("            return false;\r\n");
      out.write("        };\r\n");
      out.write("    },\"json\");\r\n");
      out.write("}\r\n");
      out.write("/***** 写入信息到状态栏  ***/\r\n");
      out.write("function statusInfo(msg){\r\n");
      out.write("    $('#status-info').fadeIn().html(msg);\r\n");
      out.write("    setTimeout(function(){\r\n");
      out.write("        $('#status-info').fadeOut();\r\n");
      out.write("    },3000);\r\n");
      out.write("}\r\n");
      out.write("/***** 合计buy-car中的数量和金额 *****/\r\n");
      out.write("function sumBuyCar(){\r\n");
      out.write("    var $the_buy_car_line = $('.buy-car li');\r\n");
      out.write("    var buy_num = 0;\r\n");
      out.write("    var buy_money = 0;\r\n");
      out.write("    //计算数量，和金额合计\r\n");
      out.write("    $the_buy_car_line.each(function(index){\r\n");
      out.write("        var $the_li = $(this);\r\n");
      out.write("        if(!$the_li.hasClass('default-tpl')){\r\n");
      out.write("            buy_num += parseInt($(this).find('.buy-num').text());\r\n");
      out.write("            buy_money += parseFloat($(this).find('.buy-paymoney').text());\r\n");
      out.write("            //重新给序号整个值\r\n");
      out.write("            $the_li.find('.goods-index').text(index+1);\r\n");
      out.write("            $the_li.find('input[class~=goods-id]').prop('name','goodsId['+(index)+']');\r\n");
      out.write("            $the_li.find('input[class~=goods-price]').prop('name','goodsPrice['+(index)+']');\r\n");
      out.write("            $the_li.find('input[class~=buy-num]').prop('name','goodsBuyNum['+(index)+']'); \r\n");
      out.write("        }\r\n");
      out.write("    });\r\n");
      out.write("    //console.info(buy_num,buy_money);\r\n");
      out.write("    $('#buy-car-goods-num').text(buy_num.toFixed(0));\r\n");
      out.write("    $('#buy-car-goods-money').text(buy_money.toFixed(2));\r\n");
      out.write("}\r\n");
      out.write("/** 将数据列表清空，为下一次收银作准备 **/\r\n");
      out.write("function removeBuyCar(){\r\n");
      out.write("    var $the_buy_car_line = $('.buy-car li');\r\n");
      out.write("    $the_buy_car_line.each(function(){\r\n");
      out.write("        var $the_li = $(this);\r\n");
      out.write("        if(!$the_li.hasClass('default-tpl')){\r\n");
      out.write("            $the_li.remove();\r\n");
      out.write("        }\r\n");
      out.write("    });\r\n");
      out.write("    $('#key-put').val('').focus();\r\n");
      out.write("    sumBuyCar();//合计一下数量\r\n");
      out.write("    shopTuiSongZhiPing();\r\n");
      out.write("}\r\n");
      out.write("/** 将数据输进列表中 **/\r\n");
      out.write("function addBuyCar(jsondata,buy_num){\r\n");
      out.write("    //console.info('压进去',jsondata);\r\n");
      out.write("    if(typeof(buy_num)=='undefined'){\r\n");
      out.write("        buy_num=1;\r\n");
      out.write("    }\r\n");
      out.write("    //取得模板\r\n");
      out.write("    var $default_tpl = $('.buy-car li[class~=default-tpl]');\r\n");
      out.write("    var $new_tpl = $default_tpl.clone();\r\n");
      out.write("    var new_li_str = $new_tpl.html();\r\n");
      out.write("    var li_index = $('.buy-car li').length;//序号\r\n");
      out.write("    //console.info($default_tpl,new_li_str);\r\n");
      out.write("    //替换里面的变量\r\n");
      out.write("\r\n");
      out.write("    var isExists = false;\r\n");
      out.write("    $('.buy-car').find('.goods-id').each(function(){\r\n");
      out.write("       if($(this).val()==jsondata.goodsId && jsondata.goodsId!=null && jsondata.goodsId!=\"\") {\r\n");
      out.write("            var goodsIndex = $(this).parent().find('.goods-index').text();\r\n");
      out.write("            //处理数据的效果\r\n");
      out.write("            $('.buy-car li').removeClass('bg-E64E40').attr('data-selected','false');\r\n");
      out.write("            $('#the-buy-line-index').val(goodsIndex);\r\n");
      out.write("            $(this).parent().attr('data-selected','true');\r\n");
      out.write("            $(this).parent().attr('data-li-index',goodsIndex);\r\n");
      out.write("            $(this).parent().addClass('bg-E64E40');\r\n");
      out.write("            clickPlus();\r\n");
      out.write("            isExists = true;\r\n");
      out.write("       }\r\n");
      out.write("    });\r\n");
      out.write("    if(isExists){\r\n");
      out.write("        return false;\r\n");
      out.write("    }\r\n");
      out.write("    new_li_str = new_li_str.replace(/\\{data-goods-index\\}/gi,li_index);//序号\r\n");
      out.write("    new_li_str = new_li_str.replace(/\\{data-goods-id\\}/gi,jsondata.goodsId);//\r\n");
      out.write("    new_li_str = new_li_str.replace(/\\{data-goods-code\\}/gi,jsondata.goodsId);//\r\n");
      out.write("\r\n");
      out.write("    //new_li_str = new_li_str.replace(/\\{data-goods-name\\}/gi,jsondata.goods_name.substr(0,12)+'...');//\r\n");
      out.write("    new_li_str = new_li_str.replace(/\\{data-goods-name\\}/gi,jsondata.goodsName);//\r\n");
      out.write("    new_li_str = new_li_str.replace(/\\{data-goods-price\\}/gi,jsondata.goodsSellPrice);//\r\n");
      out.write("    new_li_str = new_li_str.replace(/\\{data-goods-buynum\\}/gi,buy_num);//\r\n");
      out.write("    if (jsondata.pay_price) {\r\n");
      out.write("        new_li_str = new_li_str.replace(/\\{data-goods-paymoney\\}/gi,jsondata.goodsPromotionPrice);//\r\n");
      out.write("    }else{\r\n");
      out.write("        new_li_str = new_li_str.replace(/\\{data-goods-paymoney\\}/gi,jsondata.goodsSellPrice);//\r\n");
      out.write("    }\r\n");
      out.write("    new_li_str = new_li_str.replace(/\\{.+\\}/gi,'-');//\r\n");
      out.write("    //console.info(\"================\"+new_li_str);\r\n");
      out.write("\r\n");
      out.write("    //处理数据的效果\r\n");
      out.write("    $('.buy-car li').removeClass('bg-E64E40').attr('data-selected','false');\r\n");
      out.write("    $('#the-buy-line-index').val(li_index);\r\n");
      out.write("    //自己的效果\r\n");
      out.write("    $new_tpl.html(new_li_str);\r\n");
      out.write("    \r\n");
      out.write("    $new_tpl.removeClass('default-tpl').removeClass('hidden');\r\n");
      out.write("    $new_tpl.attr('data-selected','true');\r\n");
      out.write("    $new_tpl.attr('data-li-index',li_index);\r\n");
      out.write("    $new_tpl.addClass('bg-E64E40');\r\n");
      out.write("    //console.info(\"----------------------\"+$new_tpl.html());\r\n");
      out.write("    $default_tpl.before($new_tpl);\r\n");
      out.write("    //console.info(\">>>>>>>>>>>>>>>>>>>>>>\"+$new_tpl.html());\r\n");
      out.write("    $('#key-put').val('').focus();\r\n");
      out.write("    sumBuyCar();//合计一下数量\r\n");
      out.write("    //滚动条到最下面\r\n");
      out.write("    $('.buy-car').scrollTop($('.buy-car').scrollTop()+100000);\r\n");
      out.write("}\r\n");
      out.write("/** 输入框回车 **/\r\n");
      out.write("function keyPut(){\r\n");
      out.write("    var $key_put = $('#key-put');\r\n");
      out.write("    var key_str = $key_put.val().replace(/(^\\s*)|(\\s*$)/g, \"\");\r\n");
      out.write("    \r\n");
      out.write("    if(key_str==''){\r\n");
      out.write("        //如果输入框内没有东西，就返回\r\n");
      out.write("        return false;\r\n");
      out.write("    }\r\n");
      out.write("   /*  var isMoney = new RegExp(\"^([0-9]+[\\.]{1}[0-9]{1,2})$\");\r\n");
      out.write("    //console.info(key_str,isMoney.test(key_str));\r\n");
      out.write("    if(isMoney.test(key_str)){\r\n");
      out.write("        //console.info('这是钱');\r\n");
      out.write("        var no_code_goods = {'goodsSellPrice':$key_put.val(),'goodsId':'','goods_code':'','goodsName':'无码商品'};\r\n");
      out.write("        addBuyCar(no_code_goods);\r\n");
      out.write("        return true;\r\n");
      out.write("    } */\r\n");
      out.write("    \r\n");
      out.write("   /*  var isPinyin = new RegExp(\"^([a-zA-Z]+)$\");\r\n");
      out.write("    if(isPinyin.test(key_str)){\r\n");
      out.write("        //是字母就当成助记码传入给后台\r\n");
      out.write("        var uir = $key_put.attr('data-url')+'?pinyin='+key_str;\r\n");
      out.write("    }else{\r\n");
      out.write("        //当成条码传入给后台\r\n");
      out.write("        var uir = $key_put.attr('data-url')+'?code='+key_str;\r\n");
      out.write("    } */\r\n");
      out.write("    //console.info('找服务器要');\r\n");
      out.write("    //如果是条码或助记码，就去 找服务器要\r\n");
      out.write("var uir = $key_put.attr('data-url')+'?goodsName='+key_str;\r\n");
      out.write(" \r\n");
      out.write("    $.get(uir,function(result,s,xhr){\r\n");
      out.write("    \tvar sessionStatus = xhr.getResponseHeader(\"sessionstatus\");\r\n");
      out.write("    \tvar redirectLocation = xhr.getResponseHeader(\"location\");\r\n");
      out.write("   \t\tif(sessionStatus==\"sessionTimeOut\"){\t\t\t\t      \r\n");
      out.write("      \t\t$.Showmsg(result.message);\r\n");
      out.write("      \t\twindow.setTimeout(function(){\r\n");
      out.write("      \t\t\twindow.location=redirectLocation;\r\n");
      out.write("      \t\t},2000);\r\n");
      out.write("      \t\treturn;\r\n");
      out.write("     \t}\r\n");
      out.write("        //console.info(data.length);\r\n");
      out.write("        var data = result.model;\r\n");
      out.write("        if(data==null||data.length==0){\r\n");
      out.write("            //没有找到商品\r\n");
      out.write("            statusInfo('没有找到符合条件的商品【'+key_str+'】');\r\n");
      out.write("            return false;\r\n");
      out.write("        }\r\n");
      out.write("        if(data.length==1){\r\n");
      out.write("            //只有一条记录，直接压入bug-car\r\n");
      out.write("            addBuyCar(data[0]);\r\n");
      out.write("        }else{\r\n");
      out.write("            //有多个商品记录弹出下拉浮层来选择 选中后addBuyCar()\r\n");
      out.write("\r\n");
      out.write("            var li_html = '<ul class=\"more-goods x12\">';\r\n");
      out.write("            for(i=0;i<data.length;i++){\r\n");
      out.write("                //console.info($.toJSON(data[i]));\\\r\n");
      out.write("                \r\n");
      out.write("                var price = 0.00;\r\n");
      out.write("                if (data[i].goodsPromotionPrice==null||goodsPromotionPrice==0.00||goodsPromotionPrice==\"\") {\r\n");
      out.write("\t\t\t\t\tprice = data[i].goodsSellPrice;\r\n");
      out.write("\t\t\t\t}else{\r\n");
      out.write("\t\t\t\t\tprice = data[i].goodsPromotionPrice;\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t\t\r\n");
      out.write("                li_html += '<li class=\"x12 border-bottom margin-little padding-bottom\" onclick=\"javascript:moreAddBuycar(this);\" data-json=\\'';\r\n");
      out.write("                li_html += $.toJSON(data[i]);\r\n");
      out.write("                li_html += '\\'>';\r\n");
      out.write("                li_html += '<div class=\"x1\">'+(i+1)+'</div>';\r\n");
      out.write("                li_html += '<div class=\"x11\">';\r\n");
      out.write("                li_html += '<div class=\"x12\">'+data[i].goodsName+'</div>';\r\n");
      out.write("                li_html += '<div class=\"x6\">'+data[i].goodsId+'</div>';\r\n");
      out.write("                li_html += '<div class=\"x6\">售价:'+price+' 元</div>';\r\n");
      out.write("                li_html += '</div>';\r\n");
      out.write("                li_html += '</li>';\r\n");
      out.write("            }\r\n");
      out.write("            li_html += '</ul>';\r\n");
      out.write("\r\n");
      out.write("            //打开一个浮层来加载\r\n");
      out.write("            var b = {};\r\n");
      out.write("            b['data-toggle']='click';\r\n");
      out.write("            b['data-target']='.search-more';\r\n");
      out.write("            b['data-mask']='1';\r\n");
      out.write("            b['data-width']='600px';\r\n");
      out.write("            var $win = $showdialogs($(b));\r\n");
      out.write("            $win.find('.dialog-body').html(li_html);\r\n");
      out.write("            //把第一个的设置为选中\r\n");
      out.write("            var $new = $win.find('ul[class~=more-goods]>li').first();\r\n");
      out.write("            $new.attr('data-selected','true');\r\n");
      out.write("            $new.addClass('bg-E64E40');\r\n");
      out.write("            return false;\r\n");
      out.write("        }\r\n");
      out.write("    },'json');\r\n");
      out.write("    return true;\r\n");
      out.write("}\r\n");
      out.write("/*** 更多商品点击或回画进入buy-car **/\r\n");
      out.write("function moreAddBuycar(xthis){\r\n");
      out.write("\r\n");
      out.write("    if(xthis==undefined){\r\n");
      out.write("\r\n");
      out.write("        var $obj = $('.more-goods li[data-selected=true]');\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("    }else{\r\n");
      out.write("        shopTuiSongZhiPing();\r\n");
      out.write("         var $obj = $(xthis);\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("    }\r\n");
      out.write("    var jsondata = $.evalJSON($obj.attr('data-json'));\r\n");
      out.write("    addBuyCar(jsondata);\r\n");
      out.write("    shopTuiSongZhiPing();\r\n");
      out.write("    //关闭浮层\r\n");
      out.write("    closeDialogs($obj.closest('.dialog-win'));\r\n");
      out.write("}\r\n");
      out.write("function  shopTuiSongZhiPing(){\r\n");
      out.write("\r\n");
      out.write("        //进入消费收银界面推送\r\n");
      out.write("            var cpuhao=navigator.userAgent;\r\n");
      out.write("           /*  if(cpuhao.indexOf('GangHengKeJi')>=0){\r\n");
      out.write("\r\n");
      out.write("                var jrxfsy='<div class=\"x12\"><ul class=\"buy-car line over-auto border\" style=\"height: 400px;\" id=\"layout-buy-car\">'+$('#layout-buy-car').html()+'</ul></div><div class=\"x12  height padding-bottom padding-top\"><div class=\"x12 text-gray\"><div class=\"x6\">件数：<span class=\"text-red\">'+$('#buy-car-goods-num').text()+'</span></div><div class=\"x6\">合计：<span class=\"text-red\">￥'+$('#buy-car-goods-money').text()+'</span></div></div></div>';\r\n");
      out.write("                JS_FK._cr(jrxfsy,'tuisongleirong3');\r\n");
      out.write("            } */\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("/** 点击buy-car **/\r\n");
      out.write("function clickBuyCar(xthis){\r\n");
      out.write("    //处理数据的效果\r\n");
      out.write("    $('.buy-car li').removeClass('bg-E64E40').attr('data-selected','false');\r\n");
      out.write("    $('#the-buy-line-index').val($(xthis).attr('data-li-index'));\r\n");
      out.write("    //自己的效果\r\n");
      out.write("    $(xthis).attr('data-selected','true');\r\n");
      out.write("    $(xthis).addClass('bg-E64E40');\r\n");
      out.write("    $('#key-put').val('').focus();\r\n");
      out.write("}\r\n");
      out.write("/** 点击+号 **/\r\n");
      out.write("function clickPlus(){\r\n");
      out.write("    //console.info('开始加号');\r\n");
      out.write("    var $the_buy_car_line = $('.buy-car li[data-selected=true]');\r\n");
      out.write("    //取得现有的数量\r\n");
      out.write("    var buy_num = parseInt($the_buy_car_line.find('span[class~=buy-num]').text())+1;\r\n");
      out.write("    //取得现有的单价\r\n");
      out.write("    var buy_price = parseFloat($the_buy_car_line.find('span[class~=buy-price]').text());\r\n");
      out.write("    var buy_paymoney = (buy_num*buy_price).toFixed(2);\r\n");
      out.write("    $the_buy_car_line.find('span[class~=buy-paymoney]').text(buy_paymoney);\r\n");
      out.write("    $the_buy_car_line.find('span[class~=buy-num]').text(buy_num);\r\n");
      out.write("    $the_buy_car_line.find('input[class~=buy-num]').val(buy_num);\r\n");
      out.write("    $('#key-put').val('').focus();\r\n");
      out.write("    sumBuyCar();//合计一下数量\r\n");
      out.write("    shopTuiSongZhiPing();\r\n");
      out.write("}\r\n");
      out.write("/** 点击-号 **/\r\n");
      out.write("function clickMinus(){\r\n");
      out.write("    var $the_buy_car_line = $('.buy-car li[data-selected=true]');\r\n");
      out.write("    //取得现有的数量\r\n");
      out.write("    var buy_num = parseInt($the_buy_car_line.find('span[class~=buy-num]').text())-1;\r\n");
      out.write("    if(buy_num<=0){\r\n");
      out.write("        //将选中效果移到上面一个\r\n");
      out.write("        var $new = $the_buy_car_line.prev();\r\n");
      out.write("        if($new.length==0){\r\n");
      out.write("            $new = $the_buy_car_line.next();\r\n");
      out.write("        }\r\n");
      out.write("        if($new.length>0 && !$new.hasClass('default-tpl')){\r\n");
      out.write("            $new.attr('data-selected','true');\r\n");
      out.write("            $new.addClass('bg-E64E40');\r\n");
      out.write("            $('#the-buy-line-index').val($new.attr('data-li-index'));\r\n");
      out.write("        }\r\n");
      out.write("        //删除现在的，\r\n");
      out.write("        $the_buy_car_line.remove();\r\n");
      out.write("    }\r\n");
      out.write("    //取得现有的单价\r\n");
      out.write("    var buy_price = parseFloat($the_buy_car_line.find('span[class~=buy-price]').text());\r\n");
      out.write("    var buy_paymoney = (buy_num*buy_price).toFixed(2);\r\n");
      out.write("    $the_buy_car_line.find('span[class~=buy-paymoney]').text(buy_paymoney);\r\n");
      out.write("    $the_buy_car_line.find('span[class~=buy-num]').text(buy_num);\r\n");
      out.write("    $the_buy_car_line.find('input[class~=buy-num]').val(buy_num);\r\n");
      out.write("    $('#key-put').val('').focus();\r\n");
      out.write("    sumBuyCar();//合计一下数量\r\n");
      out.write("    shopTuiSongZhiPing();\r\n");
      out.write("}\r\n");
      out.write("/*** 删除当前的购买 **/\r\n");
      out.write("function clickDelete(){\r\n");
      out.write("     var $the_buy_car_line = $('.buy-car li[data-selected=true]');\r\n");
      out.write("    //将选中效果移到上面一个\r\n");
      out.write("    var $new = $the_buy_car_line.prev();\r\n");
      out.write("    if($new.length==0){\r\n");
      out.write("        $new = $the_buy_car_line.next();\r\n");
      out.write("    }\r\n");
      out.write("    if($new.length>0 && !$new.hasClass('default-tpl')){\r\n");
      out.write("        $new.attr('data-selected','true');\r\n");
      out.write("        $new.addClass('bg-E64E40');\r\n");
      out.write("        $('#the-buy-line-index').val($new.attr('data-li-index'));\r\n");
      out.write("    }\r\n");
      out.write("    //删除现在的，\r\n");
      out.write("    $the_buy_car_line.remove();\r\n");
      out.write("    //将焦点移加输入框\r\n");
      out.write("    $('#key-put').val('').focus();\r\n");
      out.write("    sumBuyCar();//合计一下数量\r\n");
      out.write("    shopTuiSongZhiPing();\r\n");
      out.write("}\r\n");
      out.write("/*** 输入数量 **/\r\n");
      out.write("function clickPlusNum(){\r\n");
      out.write("    //检查是不是已经弹出一个了\r\n");
      out.write("    var $dialogwin_input = $('.dialog-win');\r\n");
      out.write("    if($dialogwin_input.length>0){\r\n");
      out.write("        return false;\r\n");
      out.write("    }\r\n");
      out.write("    //当前选中的对像\r\n");
      out.write("    var $the_buy_car_line = $('.buy-car li[data-selected=true]');\r\n");
      out.write("    //console.info($the_buy_car_line.length);\r\n");
      out.write("    if($the_buy_car_line.length==0){\r\n");
      out.write("        return false;\r\n");
      out.write("    }\r\n");
      out.write("    //打开一个浮层来加载\r\n");
      out.write("    var b = {};\r\n");
      out.write("    b['data-toggle']='click';\r\n");
      out.write("    b['data-target']='.click-num';\r\n");
      out.write("    b['data-mask']='1';\r\n");
      out.write("    b['data-width']='300px';\r\n");
      out.write("    var $win = $showdialogs($(b));\r\n");
      out.write("\r\n");
      out.write("    $win.find('.click-num-input').val('').focus();\r\n");
      out.write("\r\n");
      out.write("}\r\n");
      out.write("/*** 输入数量的浮层执行动作 ***/\r\n");
      out.write("function sumClickPlusNum(){\r\n");
      out.write("    var $the_buy_car_line = $('.buy-car li[data-selected=true]');\r\n");
      out.write("    //取得输入的数量\r\n");
      out.write("    var $dialogwin_input = $('.dialog-win .click-num-input');\r\n");
      out.write("    var buy_num = parseInt($dialogwin_input.val());\r\n");
      out.write("    //console.info(isNaN(buy_num));\r\n");
      out.write("    if(isNaN(buy_num)==true){\r\n");
      out.write("        return false;\r\n");
      out.write("    }\r\n");
      out.write("    if((buy_num)<=0){\r\n");
      out.write("        return false;\r\n");
      out.write("    }\r\n");
      out.write("    //取得现有的单价\r\n");
      out.write("    var buy_price = parseFloat($the_buy_car_line.find('span[class~=buy-price]').text());\r\n");
      out.write("    var buy_paymoney = (buy_num*buy_price).toFixed(2);\r\n");
      out.write("    $the_buy_car_line.find('span[class~=buy-paymoney]').text(buy_paymoney);\r\n");
      out.write("    $the_buy_car_line.find('span[class~=buy-num]').text(buy_num);\r\n");
      out.write("    $the_buy_car_line.find('input[class~=buy-num]').val(buy_num);\r\n");
      out.write("    $('#key-put').val('').focus();\r\n");
      out.write("    closeDialogs($dialogwin_input.closest('.dialog-win'));\r\n");
      out.write("    sumBuyCar();//合计一下数量\r\n");
      out.write("    shopTuiSongZhiPing();\r\n");
      out.write("}\r\n");
      out.write("/**** 关闭最上面的一个浮层 *****/\r\n");
      out.write("function closeDialogs(xthis){\r\n");
      out.write("     var $last_dialog = (xthis);\r\n");
      out.write("    if(xthis==undefined){\r\n");
      out.write("        //最找最后一个来窗口来关闭\r\n");
      out.write("        $last_dialog = $('.dialog-win').last();\r\n");
      out.write("    }\r\n");
      out.write("    //console.info($last_dialog);\r\n");
      out.write("    $('.dialog-mask[masklayout='+$last_dialog.attr('masklayout')+']').remove();\r\n");
      out.write("    $last_dialog.remove();\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("/*** 主界面上下箭头 **/\r\n");
      out.write("function clickUpDown(){\r\n");
      out.write("    var $obj = $('.buy-car li[data-selected=true]');\r\n");
      out.write("    if(event.keyCode == 38){\r\n");
      out.write("        //上\r\n");
      out.write("        var $new = $obj.prev();\r\n");
      out.write("        //滚动条的改变\r\n");
      out.write("        $('.buy-car').scrollTop($('.buy-car').scrollTop()-$obj.height());\r\n");
      out.write("    }else{\r\n");
      out.write("        //下\r\n");
      out.write("        var $new = $obj.next();\r\n");
      out.write("        //滚动条的改变\r\n");
      out.write("        $('.buy-car').scrollTop($('.buy-car').scrollTop()+$obj.height());\r\n");
      out.write("    }\r\n");
      out.write("    if($new.length==0 || $new.hasClass('default-tpl')){\r\n");
      out.write("        return false;\r\n");
      out.write("    }\r\n");
      out.write("    //console.info($new.length);\r\n");
      out.write("    $obj.attr('data-selected','false');\r\n");
      out.write("    $obj.removeClass('bg-E64E40');\r\n");
      out.write("    //改变效果\r\n");
      out.write("    $new.attr('data-selected','true');\r\n");
      out.write("    $new.addClass('bg-E64E40');\r\n");
      out.write("    //改变现在选中的数据记录\r\n");
      out.write("    $('#the-buy-line-index').val($new.attr('data-li-index'));\r\n");
      out.write("\r\n");
      out.write("    $('#key-put').val('').focus(); //焦点默认到输入框\r\n");
      out.write("    return true;\r\n");
      out.write("}\r\n");
      out.write("/*** 浮层商品选择上下箭头 **/\r\n");
      out.write("function clickDialogUpDown(){\r\n");
      out.write("    var $obj = $('.more-goods li[data-selected=true]');\r\n");
      out.write("    //console.info($obj);\r\n");
      out.write("    if(event.keyCode == 38){\r\n");
      out.write("        //上\r\n");
      out.write("        var $new = $obj.prev();\r\n");
      out.write("        //滚动条的改变\r\n");
      out.write("        $obj.closest('.dialog-body').scrollTop($obj.closest('.dialog-body').scrollTop()-$obj.height());\r\n");
      out.write("    }else{\r\n");
      out.write("        //下\r\n");
      out.write("        var $new = $obj.next();\r\n");
      out.write("        //滚动条的改变\r\n");
      out.write("        $obj.closest('.dialog-body').scrollTop($obj.closest('.dialog-body').scrollTop()+$obj.height());\r\n");
      out.write("    }\r\n");
      out.write("    //console.info($new.length);\r\n");
      out.write("    if($new.length==0){\r\n");
      out.write("        return false;\r\n");
      out.write("    }\r\n");
      out.write("    $obj.attr('data-selected','false');\r\n");
      out.write("    $obj.removeClass('bg-E64E40');\r\n");
      out.write("    //改变效果\r\n");
      out.write("    $new.attr('data-selected','true');\r\n");
      out.write("    $new.addClass('bg-E64E40');\r\n");
      out.write("    return true;\r\n");
      out.write("}\r\n");
      out.write("/*** 浮层会员的选择上下箭头 **/\r\n");
      out.write("function clickDialogMemberUpDown(){\r\n");
      out.write("    //console.info('vv');\r\n");
      out.write("    var $obj = $('.more-member li[data-selected=true]');\r\n");
      out.write("    if(event.keyCode == 38){\r\n");
      out.write("        //上\r\n");
      out.write("        var $new = $obj.prev();\r\n");
      out.write("        //滚动条的改变\r\n");
      out.write("        $obj.closest('.dialog-body').scrollTop($obj.closest('.dialog-body').scrollTop()-$obj.height());\r\n");
      out.write("    }else{\r\n");
      out.write("        //下\r\n");
      out.write("        var $new = $obj.next();\r\n");
      out.write("        //滚动条的改变\r\n");
      out.write("        $obj.closest('.dialog-body').scrollTop($obj.closest('.dialog-body').scrollTop()+$obj.height());\r\n");
      out.write("    }\r\n");
      out.write("    if($new.length==0){\r\n");
      out.write("        return false;\r\n");
      out.write("    }\r\n");
      out.write("    $obj.attr('data-selected','false');\r\n");
      out.write("    $obj.removeClass('bg-E64E40');\r\n");
      out.write("    //改变效果\r\n");
      out.write("    $new.attr('data-selected','true');\r\n");
      out.write("    $new.addClass('bg-E64E40');\r\n");
      out.write("    return true;\r\n");
      out.write("}\r\n");
      out.write("$(function(){\r\n");
      out.write("    $('.rightw').width($(window).width()-450);\r\n");
      out.write("    $(window).resize(function(){\r\n");
      out.write("        autoFullHeight();\r\n");
      out.write("            $('.rightw').width($(window).width()-450);\r\n");
      out.write("        });\r\n");
      out.write("    autoFullHeight();//全屏\r\n");
      out.write("    $(\"body\").keydown(function(event) {\r\n");
      out.write("        /////////////////// 以下是对回车键的处理\r\n");
      out.write("        ////console.info(event.keyCode);\r\n");
      out.write("        switch(event.keyCode){\r\n");
      out.write("            //case 73:\r\n");
      out.write("//                // i 未结算订单\r\n");
      out.write("//                event.preventDefault();//移出原有功能\r\n");
      out.write("//                toNotSettledOrder();\r\n");
      out.write("//            break;\r\n");
      out.write("            case 107:\r\n");
      out.write("                //+号\r\n");
      out.write("                event.preventDefault();//移出原有功能\r\n");
      out.write("                clickPlus();\r\n");
      out.write("            break;\r\n");
      out.write("            case 109:\r\n");
      out.write("                //-号\r\n");
      out.write("                event.preventDefault();//移出原有功能\r\n");
      out.write("                clickMinus();\r\n");
      out.write("            break;\r\n");
      out.write("            case 38:\r\n");
      out.write("                //上箭头\r\n");
      out.write("                event.preventDefault();//移出原有功能\r\n");
      out.write("                if($('.more-goods li').length>0){\r\n");
      out.write("                    clickDialogUpDown();\r\n");
      out.write("                }else if($('.more-member li').length>0){\r\n");
      out.write("                    //会员选择浮层如果有\r\n");
      out.write("                    clickDialogMemberUpDown();\r\n");
      out.write("                }else{\r\n");
      out.write("                    clickUpDown();\r\n");
      out.write("                }\r\n");
      out.write("            break;\r\n");
      out.write("            case 40:\r\n");
      out.write("                //下箭头\r\n");
      out.write("                event.preventDefault();//移出原有功能\r\n");
      out.write("                if($('.more-goods li').length>0){\r\n");
      out.write("                    //商品浮层如果有，\r\n");
      out.write("                    clickDialogUpDown();\r\n");
      out.write("                }else if($('.more-member li').length>0){\r\n");
      out.write("                    //会员选择浮层如果有\r\n");
      out.write("                    clickDialogMemberUpDown();\r\n");
      out.write("                }else{\r\n");
      out.write("                    clickUpDown();\r\n");
      out.write("                }\r\n");
      out.write("            break;\r\n");
      out.write("            case 106:\r\n");
      out.write("                //*号\r\n");
      out.write("                event.preventDefault();//移出原有功能\r\n");
      out.write("                clickPlusNum();\r\n");
      out.write("            break;\r\n");
      out.write("            case 111:\r\n");
      out.write("                // /号 结算\r\n");
      out.write("                event.preventDefault();//移出原有功能\r\n");
      out.write("                toOrder();\r\n");
      out.write("            break;\r\n");
      out.write("\r\n");
      out.write("            //case 81:\r\n");
      out.write("//                // q 充次结算\r\n");
      out.write("//                event.preventDefault();//移出原有功能\r\n");
      out.write("//                toOrderPackages();\r\n");
      out.write("//            break;\r\n");
      out.write("           // case 71:\r\n");
      out.write("//                // g 挂单操作\r\n");
      out.write("//                event.preventDefault();//移出原有功能\r\n");
      out.write("//                toTmpOrder()();\r\n");
      out.write("//            break;\r\n");
      out.write("            //case 68:\r\n");
      out.write("//                //d 删除当前行\r\n");
      out.write("//                event.preventDefault();//移出原有功能\r\n");
      out.write("//                clickDelete();\r\n");
      out.write("//            break;\r\n");
      out.write("            //case 67:\r\n");
      out.write("//                //c 清空\r\n");
      out.write("//                event.preventDefault();//移出原有功能\r\n");
      out.write("//                 removeBuyCar();\r\n");
      out.write("//            break;\r\n");
      out.write("//\r\n");
      out.write("            case 27:\r\n");
      out.write("                //esc，关闭顶部浮层\r\n");
      out.write("                event.preventDefault();//移出原有功能\r\n");
      out.write("                closeDialogs();\r\n");
      out.write("            break;\r\n");
      out.write("            case 32:\r\n");
      out.write("                //空格，回到输入框焦点\r\n");
      out.write("                event.preventDefault();//移出原有功能\r\n");
      out.write("                $('#key-member').val('').focus(); //焦点默认到输入框\r\n");
      out.write("            break;\r\n");
      out.write("            case 13:\r\n");
      out.write("                //回车\r\n");
      out.write("                if($('.dialog-win .success-dialogs').length>0){\r\n");
      out.write("                    //在支付页成功页按下回车\r\n");
      out.write("                    event.preventDefault();//移出原有功能\r\n");
      out.write("                    $('.dialog-win .success-dialogs').click();\r\n");
      out.write("                    return false;\r\n");
      out.write("                }else if($('.pay-dialog').length>0){\r\n");
      out.write("                    //在支付页按下回车\r\n");
      out.write("                    event.preventDefault();//移出原有功能\r\n");
      out.write("                    $('.pay-dialog').submit();\r\n");
      out.write("                    return false;\r\n");
      out.write("                }else if($('.dialog-win .pay-order-confirm .pay-method[pay-method=2]').length>0){\r\n");
      out.write("                    //在结算界面按下回车，默认为现金结算\r\n");
      out.write("                    event.preventDefault();//移出原有功能\r\n");
      out.write("                    $('.dialog-win .pay-order-confirm .pay-method[pay-method=2]').click();\r\n");
      out.write("                    return false;\r\n");
      out.write("                }else if($('.dialog-win .click-num-input').length>0){\r\n");
      out.write("                    //是不是数量输浮层下按的回车\r\n");
      out.write("                    event.preventDefault();//移出原有功能\r\n");
      out.write("                    sumClickPlusNum();\r\n");
      out.write("                    return false;\r\n");
      out.write("                }else if($('.dialog-win .more-goods').length>0){\r\n");
      out.write("                    //在更多商品页按回车\r\n");
      out.write("                    event.preventDefault();//移出原有功能\r\n");
      out.write("                    moreAddBuycar();\r\n");
      out.write("                    return false;\r\n");
      out.write("                }else if($('.dialog-win .more-member').length>0){\r\n");
      out.write("                    //在更多会员页按回车\r\n");
      out.write("                    event.preventDefault();//移出原有功能\r\n");
      out.write("                    moreAddMember();\r\n");
      out.write("                    return false;\r\n");
      out.write("                }else if($('#key-member').val()!=''){\r\n");
      out.write("                    //会员搜索框不为空时按回车\r\n");
      out.write("                    event.preventDefault();//移出原有功能\r\n");
      out.write("                    searchMember();\r\n");
      out.write("                    return false;\r\n");
      out.write("                }else if(keyPut()){\r\n");
      out.write("                    //主输入框的回车动作\r\n");
      out.write("                    event.preventDefault();//移出原有功能\r\n");
      out.write("                    return false;\r\n");
      out.write("                }else{\r\n");
      out.write("                    //收银台界面按回车也默认到输入框\r\n");
      out.write("                    $('#key-put').val('').focus(); //焦点默认到输入框\r\n");
      out.write("                }\r\n");
      out.write("            break;\r\n");
      out.write("        }\r\n");
      out.write("    });\r\n");
      out.write("    //默认找服务器先要一个订单来\r\n");
      out.write("    //getNextOrdernum();\r\n");
      out.write("    //默认加载第一个分类的图片\r\n");
      out.write("    //goods_list();\r\n");
      out.write("    $('#key-put').val('').focus(); //焦点默认到输入框\r\n");
      out.write("});\r\n");
      out.write("\t\r\n");
      out.write("  $(function(){\r\n");
      out.write("\tvar message = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${message}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("\";\r\n");
      out.write("\tif (message==\"success\") {\r\n");
      out.write("\t\t $.Showmsg(\"支付成功！\");\t\r\n");
      out.write("\t}\r\n");
      out.write("\tsetTimeout(function() {\r\n");
      out.write("        $.Hidemsg();\r\n");
      out.write("   \t}, 2000);\r\n");
      out.write("\t\r\n");
      out.write("});\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("</script><!--小票打印-->\r\n");
      out.write("<div id=\"sys-print-ticket\" style=\"display: none;\" data-url=\"\">\r\n");
      out.write("\r\n");
      out.write("</div>\r\n");
      out.write("\r\n");
      out.write("</body>\r\n");
      out.write("</html>\r\n");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try { out.clearBuffer(); } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
